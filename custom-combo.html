<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>–§—É–¥-–º–∞—Ä–∫–µ—Ç - –°–æ–±—Ä–∞—Ç—å —Å–≤–æ–π –ª–∞–Ω—á</title>
    <link rel="stylesheet" href="menu.css">
    <link rel="stylesheet" href="combos.css">
    <link rel="stylesheet" href="custom-combo.css">
    <link media="print" rel="stylesheet" href="print.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header clearfix">
        <nav class="main-menu">
            <div><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></div>
            <div><a href="menu.html">–ú–µ–Ω—é</a></div>
            <div><a href="combo.html">–ö–æ–º–±–æ-–ª–∞–Ω—á–∏</a></div>
            <div><a href="custom-combo.html" class="active">–°–æ–±—Ä–∞—Ç—å –ª–∞–Ω—á</a></div>
            <div><a href="">–û—Ç–∑—ã–≤—ã</a></div>
            <div><a href="auth.html">–í–æ–π—Ç–∏</a></div>
        </nav>
    </header>
    
    <main>
        <section class="custom-combo-section">
            <h1>–°–æ–±–µ—Ä–∏ —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –ª–∞–Ω—á <span id="loading-indicator" style="color: #666; font-size: 0.8em;">(–∑–∞–≥—Ä—É–∑–∫–∞...)</span></h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 5 –±–ª—é–¥ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 25% –Ω–∞ –≤–µ—Å—å –∑–∞–∫–∞–∑!</p>
            
            <div class="custom-combo-container">
                <div class="combo-builder">
                    <!-- –í—ã–±–æ—Ä —Å—É–ø–∞ -->
                    <section class="category-section">
                        <h2><span class="step-badge">1</span> –°—É–ø</h2>
                        <div class="filters">
                            <button class="filter-btn active" data-category="soup" data-kind="all">–í—Å–µ</button>
                            <button class="filter-btn" data-category="soup" data-kind="fish">–†—ã–±–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="soup" data-kind="meat">–ú—è—Å–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="soup" data-kind="veg">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–µ</button>
                        </div>
                        <div class="dishes-grid" id="soup-grid">
                            <p class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–ø–æ–≤...</p>
                        </div>
                    </section>
                    
                    <!-- –í—ã–±–æ—Ä —Å—Ç–∞—Ä—Ç–µ—Ä–∞ -->
                    <section class="category-section">
                        <h2><span class="step-badge">2</span> –°—Ç–∞—Ä—Ç–µ—Ä</h2>
                        <div class="filters">
                            <button class="filter-btn active" data-category="starter" data-kind="all">–í—Å–µ</button>
                            <button class="filter-btn" data-category="starter" data-kind="fish">–†—ã–±–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="starter" data-kind="meat">–ú—è—Å–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="starter" data-kind="veg">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–µ</button>
                        </div>
                        <div class="dishes-grid" id="starter-grid">
                            <p class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ä—Ç–µ—Ä–æ–≤...</p>
                        </div>
                    </section>
                    
                    <!-- –í—ã–±–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–ª—é–¥–∞ -->
                    <section class="category-section">
                        <h2><span class="step-badge">3</span> –û—Å–Ω–æ–≤–Ω–æ–µ –±–ª—é–¥–æ</h2>
                        <div class="filters">
                            <button class="filter-btn active" data-category="main_dish" data-kind="all">–í—Å–µ</button>
                            <button class="filter-btn" data-category="main_dish" data-kind="fish">–†—ã–±–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="main_dish" data-kind="meat">–ú—è—Å–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="main_dish" data-kind="veg">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–µ</button>
                        </div>
                        <div class="dishes-grid" id="main-grid">
                            <p class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –±–ª—é–¥...</p>
                        </div>
                    </section>
                    
                    <!-- –í—ã–±–æ—Ä –Ω–∞–ø–∏—Ç–∫–∞ -->
                    <section class="category-section">
                        <h2><span class="step-badge">4</span> –ù–∞–ø–∏—Ç–æ–∫</h2>
                        <div class="filters">
                            <button class="filter-btn active" data-category="drink" data-kind="all">–í—Å–µ</button>
                            <button class="filter-btn" data-category="drink" data-kind="cold">–•–æ–ª–æ–¥–Ω—ã–µ</button>
                            <button class="filter-btn" data-category="drink" data-kind="hot">–ì–æ—Ä—è—á–∏–µ</button>
                        </div>
                        <div class="dishes-grid" id="drink-grid">
                            <p class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤...</p>
                        </div>
                    </section>
                    
                    <!-- –í—ã–±–æ—Ä –¥–µ—Å–µ—Ä—Ç–∞ -->
                    <section class="category-section">
                        <h2><span class="step-badge">5</span> –î–µ—Å–µ—Ä—Ç</h2>
                        <div class="filters">
                            <button class="filter-btn active" data-category="dessert" data-kind="all">–í—Å–µ</button>
                            <button class="filter-btn" data-category="dessert" data-kind="small">–ú–∞–ª–µ–Ω—å–∫–∏–µ</button>
                            <button class="filter-btn" data-category="dessert" data-kind="medium">–°—Ä–µ–¥–Ω–∏–µ</button>
                            <button class="filter-btn" data-category="dessert" data-kind="large">–ë–æ–ª—å—à–∏–µ</button>
                        </div>
                        <div class="dishes-grid" id="dessert-grid">
                            <p class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Å–µ—Ä—Ç–æ–≤...</p>
                        </div>
                    </section>
                </div>
                
                <div class="combo-summary">
                    <h3>–í–∞—à –ª–∞–Ω—á</h3>
                    <div class="summary-list" id="summary-list">
                        <p class="empty-message">–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é...</p>
                    </div>
                    <div class="price-summary">
                        <div class="price-row">
                            <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –±–ª—é–¥:</span>
                            <span id="subtotal-price">0‚ÇΩ</span>
                        </div>
                        <div class="price-row discount">
                            <span>–°–∫–∏–¥–∫–∞ 25%:</span>
                            <span id="discount-amount">-0‚ÇΩ</span>
                        </div>
                        <div class="price-row total">
                            <span>–ò—Ç–æ–≥–æ:</span>
                            <span id="total-price">0‚ÇΩ</span>
                        </div>
                    </div>
                    <button class="add-to-cart-btn" id="add-to-cart" disabled>–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                    <p class="combo-hint">üí° –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É –±–ª—é–¥—É –∏–∑ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ª–∞–Ω—á–∞</p>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="footer">
        <p style="margin: 0;"><a href="" title="–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
        <a href="" title="–ë—É–¥—É—Ç —Å–¥–µ–ª–∞–Ω—ã(–Ω–∞–≤–µ—Ä–Ω–æ–µ)">Cookies</a>
        <a href="feedback.html" title="–ù–∞–ø–∏—à–∏ –Ω–∞–º">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a></p>
        –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: 
        –¢–µ–ª–µ—Ñ–æ–Ω: +7(000)000-00-00;
        –ü–æ—á—Ç–∞: food_market_for_you@mail.ru
    </footer>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification" class="notification-overlay" style="display: none;">
        <div class="notification-window">
            <p id="notification-text">–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
            <button class="notification-btn" id="notification-ok">–û–∫–µ–π</button>
        </div>
    </div>
    
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ dishes —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é loadDishes -->
    <script src="dishes.js"></script>
    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–ª—é–¥–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–±–æ—Ä–∫—É –∫–æ–º–±–æ
        async function initCustomCombo() {
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–ª—é–¥–∞
                const loadedDishes = await loadDishes();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±–ª—é–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
                if (!loadedDishes || loadedDishes.length === 0) {
                    throw new Error('No dishes loaded');
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º customCombo.js
                await new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = 'customCombo.js';
                    script.onload = resolve;
                    script.onerror = reject;
                    document.body.appendChild(script);
                });
                
                // –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading-indicator').style.display = 'none';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
                document.querySelectorAll('.loading-message').forEach(el => {
                    el.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–æ';
                });
                
                console.log('Custom combo initialized with', loadedDishes.length, 'dishes');
                
            } catch (error) {
                console.error('Error initializing custom combo:', error);
                document.getElementById('loading-indicator').textContent = '(–æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏)';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                document.querySelectorAll('.loading-message').forEach(el => {
                    el.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é';
                    el.style.color = '#ff6b6b';
                });
                
                document.querySelector('.empty-message').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.';
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
        document.addEventListener('DOMContentLoaded', initCustomCombo);
    </script>
</body>
</html>